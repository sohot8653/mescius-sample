/*!
    *
    * Wijmo Library 5.20232.939
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */

"use strict";var __rest=this&&this.__rest||function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&(o[i[l]]=e[i[l]])}return o},__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);t.default=e;return t};Object.defineProperty(exports,"__esModule",{value:!0});const wijmo_vue2_base_1=require("wijmo/wijmo.vue2.base"),wjcCore=__importStar(require("wijmo/wijmo")),wjcGrid=__importStar(require("wijmo/wijmo.grid")),wjcInteropGrid=__importStar(require("wijmo/wijmo.interop.grid"));exports.CellTemplateType=wjcInteropGrid.GridCellTemplateType;class WjFlexGridBehavior extends wijmo_vue2_base_1.WjComponentBehavior{_createControl(){let e=super._createControl();new DirectiveCellFactory(e);return e}}WjFlexGridBehavior.tag="wj-flex-grid";WjFlexGridBehavior.props=["isDisabled","tabOrder","newRowAtTop","allowAddNew","allowDelete","allowDragging","allowMerging","allowResizing","allowSorting","allowPinning","autoScroll","autoRowHeights","autoSizeMode","autoGenerateColumns","autoSearch","caseSensitiveSearch","quickAutoSize","bigCheckboxes","childItemsPath","groupHeaderFormat","headersVisibility","showSelectedHeaders","showMarquee","showPlaceholders","itemFormatter","isReadOnly","imeEnabled","mergeManager","selectionMode","showGroups","showSort","showDropDown","showAlternatingRows","showErrors","alternatingRowStep","itemValidator","validateEdits","treeIndent","itemsSource","autoClipboard","expandSelectionOnCopyPaste","frozenRows","frozenColumns","cloneFrozenCells","deferResizing","sortRowIndex","editColumnIndex","stickyHeaders","preserveSelectedState","preserveOutlineState","preserveWhiteSpace","keyActionTab","keyActionEnter","rowHeaderPath","virtualizationThreshold","anchorCursor","lazyRender","refreshOnEdit","copyHeaders","columnGroups","commitEmptyEdits","headersFocusability","ariaLabel"];WjFlexGridBehavior.events=["initialized","gotFocus","lostFocus","refreshing","refreshed","invalidInput","beginningEdit","cellEditEnded","cellEditEnding","prepareCellForEdit","formatItem","resizingColumn","resizedColumn","autoSizingColumn","autoSizedColumn","draggingColumn","draggingColumnOver","draggedColumn","sortingColumn","sortedColumn","pinningColumn","pinnedColumn","resizingRow","resizedRow","autoSizingRow","autoSizedRow","draggingRow","draggingRowOver","draggedRow","deletingRow","deletedRow","loadingRows","loadedRows","rowEditStarting","rowEditStarted","rowEditEnding","rowEditEnded","rowAdded","groupCollapsedChanging","groupCollapsedChanged","columnGroupCollapsedChanging","columnGroupCollapsedChanged","itemsSourceChanging","itemsSourceChanged","selectionChanging","selectionChanged","scrollPositionChanged","updatingView","updatedView","updatingLayout","updatedLayout","pasting","pasted","pastingCell","pastedCell","copying","copied"];WjFlexGridBehavior.classCtor=function(){return wjcGrid.FlexGrid};exports.WjFlexGrid=WjFlexGridBehavior.register();function registerV3WjFlexGrid(e){e.component(WjFlexGridBehavior.tag,exports.WjFlexGrid)}class WjFlexGridColumnBehavior extends wijmo_vue2_base_1.WjComponentBehavior{_initParent(){var e=this.parent.control;if(e.autoGenerateColumns){e.autoGenerateColumns=!1;e.columns.clear()}super._initParent()}}WjFlexGridColumnBehavior.tag="wj-flex-grid-column";WjFlexGridColumnBehavior.parentProp="columns";WjFlexGridColumnBehavior.props=["wjProperty","name","dataMap","dataType","binding","sortMemberPath","format","cellTemplate","header","width","maxLength","minWidth","maxWidth","align","allowDragging","allowSorting","allowResizing","allowMerging","aggregate","isReadOnly","cssClass","cssClassAll","isContentHtml","isSelected","visible","wordWrap","multiLine","mask","inputType","isRequired","showDropDown","dataMapEditor","dropDownCssClass","quickAutoSize","editor"];WjFlexGridColumnBehavior.events=["initialized"];WjFlexGridColumnBehavior.changeEvents={"grid.selectionChanged":["isSelected"]};WjFlexGridColumnBehavior.classCtor=function(){return wjcGrid.Column};exports.WjFlexGridColumn=WjFlexGridColumnBehavior.register();function registerV3WjFlexGridColumn(e){e.component(WjFlexGridColumnBehavior.tag,exports.WjFlexGridColumn)}class WjFlexGridColumnGroupBehavior extends wijmo_vue2_base_1.WjComponentBehavior{}WjFlexGridColumnGroupBehavior.tag="wj-flex-grid-column-group";WjFlexGridColumnGroupBehavior.parentProp="columnGroups";WjFlexGridColumnGroupBehavior.props=["wjProperty","name","dataMap","dataType","binding","sortMemberPath","format","cellTemplate","header","width","maxLength","minWidth","maxWidth","align","allowDragging","allowSorting","allowResizing","allowMerging","aggregate","isReadOnly","cssClass","cssClassAll","isContentHtml","isSelected","visible","wordWrap","multiLine","mask","inputType","isRequired","showDropDown","dataMapEditor","dropDownCssClass","quickAutoSize","editor","collapseTo","isCollapsed","height"];WjFlexGridColumnGroupBehavior.events=["initialized"];WjFlexGridColumnGroupBehavior.changeEvents={"grid.selectionChanged":["isSelected"]};WjFlexGridColumnGroupBehavior.classCtor=function(){return wjcGrid.ColumnGroup};exports.WjFlexGridColumnGroup=WjFlexGridColumnGroupBehavior.register();function registerV3WjFlexGridColumnGroup(e){e.component(WjFlexGridColumnGroupBehavior.tag,exports.WjFlexGridColumnGroup)}class DirectiveCellFactory extends wjcInteropGrid.DirectiveCellFactoryBase{shouldInstantiate(e){let t=e.templateCache;return null==t||t.column!==e.column||!t.cellCmp||t.templateContextProperty!==e.templateContextProperty||e.cell.firstChild!=t.rootElement}renderTemplate(e,t){let o=e.row,i={},l=e.templateContext;e.cellBindingsData=this.setBindingsData(i,o,e.column,o.dataItem,e.cellValue,l.valuePaths);if(t){let t=e.cell,o=l._instantiateTemplate(t,i.cell),r=e.templateCache={column:e.column,rootElement:o.$el,templateContextProperty:e.templateContextProperty,cellCmp:o};t[e.templateContextProperty]=r}else{let t=e.templateCache.cellCmp;t.context=i.cell;t.$forceUpdate()}}disposeTemplate(e,t,o){let i=t&&t.cellCmp;if(i){i.$destroy();t.cellCmp=null;super.disposeTemplate(e,t,o)}}clearCell(e){e.textContent=""}applyImmediately(e){if(!wijmo_vue2_base_1.VueApi.isV3Plus){const t=e.templateCache.cellCmp._watcher;t&&"function"==typeof t.run&&t.run()}}flushPendingEvents(e){}getEditorFocusFlag(){return!0}setEditorFocusFlag(e){}}exports.DirectiveCellFactory=DirectiveCellFactory;exports.WjFlexGridCellTemplateDefinition={props:{cellOverflow:{default:void 0},cellType:{default:void 0},autoSizeRows:{default:!0},forceFullEdit:{default:!0}},render:function(e){return wijmo_vue2_base_1.VueApi.isV3Plus?wijmo_vue2_base_1.VueApi.h("div"):e("div")},mounted:function(){let e=this.$parent;if(e){let t=e[wijmo_vue2_base_1.WjComponentBehavior._behProp];t._mountedCB(()=>{let o=this.ownerControl=t.control;if(o instanceof wjcGrid.FlexGrid)this.grid=o;else if(o instanceof wjcGrid.Column){this.column=o;let t,i=e;do{let e=(i=i.$parent)&&i[wijmo_vue2_base_1.WjComponentBehavior._behProp];t=e&&e.control}while(!(t instanceof wjcGrid.FlexGrid));this.grid=t}this._attachToControl()})}},methods:{_attachToControl:function(){let e=this.cellTypeEnum=wjcCore.asEnum(this.cellType,exports.CellTemplateType),t=this.ownerControl;t[DirectiveCellFactory.getTemplContextProp(e)]=this;t instanceof wjcGrid.Column&&(e===exports.CellTemplateType.Cell||e===exports.CellTemplateType.ColumnHeader||e===exports.CellTemplateType.ColumnFooter)&&t._setFlag(wjcGrid.RowColFlags.HasTemplate,!0);this.grid.invalidate()},_detachFromControl:function(){if(null!=this.cellTypeEnum){this.ownerControl[DirectiveCellFactory.getTemplContextProp(this.cellTypeEnum)]=null;this.grid.invalidate()}},_instantiateTemplate:function(e,t){let o=wijmo_vue2_base_1.VueApi.isV3Plus?new V3CellTemplateCmp({parent:this}):new CellTemplateCmp({parent:this});o.context=t;o.slotFn=wijmo_vue2_base_1.VueApi.isV3Plus?this.$slots.default:this.$scopedSlots.default;o.$mount();e&&e.appendChild(o.$el);return o}}};exports.WjFlexGridCellTemplateDefinition[wijmo_vue2_base_1.VueApi.isV3Plus?"unmounted":"destroyed"]=function(){this._detachFromControl()};const WjFlexGridCellTemplateTag="wj-flex-grid-cell-template";exports.WjFlexGridCellTemplate=wijmo_vue2_base_1.VueApi.isV3Plus?exports.WjFlexGridCellTemplateDefinition:wijmo_vue2_base_1.VueApi.component(WjFlexGridCellTemplateTag,exports.WjFlexGridCellTemplateDefinition);function registerV3WjFlexGridCellTemplate(e){e.component(WjFlexGridCellTemplateTag,exports.WjFlexGridCellTemplate)}var CellTemplateCmp=wijmo_vue2_base_1.VueApi.extend({render:function(e){const t=this.slotFn;return e("div",t&&[t(this.context)])}});class V3CellTemplateCmp{constructor(e){this.props=e;this._host=document.createElement("div")}$mount(){const e=wijmo_vue2_base_1.VueApi.h,t=this.props,{parent:o}=t,i=__rest(t,["parent"]);wijmo_vue2_base_1.VueApi.render(e({parent:o,render:()=>e("div",i,this.slotFn&&this.slotFn(this.context))}),this.$el)}get $el(){return this._host}$destroy(){wijmo_vue2_base_1.VueApi.render(null,this.$el);this._host=null}$forceUpdate(){this._host&&this.$mount()}}function registerGrid(e){if(wijmo_vue2_base_1.VueApi.isV3Plus){registerV3WjFlexGrid(e);registerV3WjFlexGridColumn(e);registerV3WjFlexGridColumnGroup(e);registerV3WjFlexGridCellTemplate(e)}}exports.registerGrid=registerGrid;