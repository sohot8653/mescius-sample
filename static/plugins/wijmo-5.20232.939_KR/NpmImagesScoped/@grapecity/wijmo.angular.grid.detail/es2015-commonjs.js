/*!
    *
    * Wijmo Library 5.20232.939
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */

"use strict";var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);t.default=e;return t};Object.defineProperty(exports,"__esModule",{value:!0});const wijmo_angular_base_1=require("@grapecity/wijmo.angular.base"),mNg=__importStar(require("angular")),wjcGridDetail=__importStar(require("@grapecity/wijmo.grid.detail"));var wjNg=mNg;const wijmoGridDetailName="wj.grid.detail";exports.ngModuleName="wj.grid.detail";var wijmoGridDetail=wijmo_angular_base_1._registerNgModule("wj.grid.detail");wijmo_angular_base_1.softRefGridDetail()&&wijmoGridDetail.directive("wjFlexGridDetail",["$compile",function(e){return new WjFlexGridDetail(e)}]);class WjFlexGridDetail extends wijmo_angular_base_1.WjDirective{constructor(e){super();this._$compile=e;this.require="^wjFlexGrid";this.terminal=!0;if(wijmo_angular_base_1.WjDirective._dynaTemplates){this.transclude=!1;this.priority=100;this.template=function(e,t){t[WjFlexGridDetail._detailTemplateProp]=e[0].innerHTML;return"<div />"}}else{this.transclude=!0;this.template="<div ng-transclude/>"}}get _controlConstructor(){return wjcGridDetail.FlexGridDetailProvider}_createLink(){return new WjFlexGridDetailLink}}WjFlexGridDetail._detailTemplateProp="$__wjDetailTemplate";WjFlexGridDetail._detailScopeProp="$_detailScope";exports.WjFlexGridDetail=WjFlexGridDetail;class WjFlexGridDetailLink extends wijmo_angular_base_1.WjLink{_initParent(){super._initParent();var e=this,t=this.tAttrs[WjFlexGridDetail._detailTemplateProp],i=this.control;this.itemTemplate=this._getCellTemplate(null!=t?t:wijmo_angular_base_1.WjDirective._removeTransclude(this.tElement[0].innerHTML));var r=this._getCellTemplate(this.itemTemplate);this._tmplLink=this.directive._$compile("<div>"+r+"</div>");i.createDetailCell=function(t,r){var l=e._getCellScope(e.scope.$parent,t,r),a=e._tmplLink(l,(function(e,t){}))[0];a[wijmo_angular_base_1.WjDirective._elemScopeProp]=l;i.grid.hostElement.appendChild(a);l.$root&&!l.$root.$$phase&&l.$apply();a.parentElement.removeChild(a);return a};i.disposeDetailCell=function(e){if(e.detail){let t=e.detail[wijmo_angular_base_1.WjDirective._elemScopeProp];t&&t.$destroy()}};this.parent._isInitialized&&this.control&&this.control.invalidate()}_destroy(){var e=this.parent&&this.parent.control,t=this.control;t.createDetailCell=null;t.disposeDetailCell=null;super._destroy();this._tmplLink=null;e&&e.invalidate()}_getCellScope(e,t,i){var r=e.$new();r.$row=t;r.$col=i;r.$item=t.dataItem;return r}_getCellTemplate(e){e&&(e=(e=(e=e.replace(/ng\-style/g,"style")).replace(/ class\=\"ng\-scope\"( \"ng\-binding\")?/g,"")).replace(/<span>\s*<\/span>/g,""));return e}}